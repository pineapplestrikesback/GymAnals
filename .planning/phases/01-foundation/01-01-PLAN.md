---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - GymAnals/Models/Enums/MuscleGroup.swift
  - GymAnals/Models/Enums/Muscle.swift
  - GymAnals/Models/Enums/WeightUnit.swift
  - GymAnals/Models/Core/Movement.swift
  - GymAnals/Models/Core/Variant.swift
  - GymAnals/Models/Core/VariantMuscle.swift
  - GymAnals/Models/Core/Equipment.swift
  - GymAnals/Models/Core/Exercise.swift
  - GymAnals/Models/Core/Gym.swift
  - GymAnals/Models/Core/Workout.swift
  - GymAnals/Models/Core/WorkoutSet.swift
  - GymAnals/Models/Core/ExerciseWeightHistory.swift
autonomous: true

must_haves:
  truths:
    - "All muscle enums compile with 30-40 cases"
    - "All @Model classes compile without SwiftData errors"
    - "Relationships between models are properly defined"
  artifacts:
    - path: "GymAnals/Models/Enums/Muscle.swift"
      provides: "Complete muscle taxonomy enum"
      contains: "enum Muscle"
    - path: "GymAnals/Models/Core/Movement.swift"
      provides: "Base movement pattern model"
      contains: "@Model"
    - path: "GymAnals/Models/Core/Workout.swift"
      provides: "Workout session model"
      contains: "@Model"
  key_links:
    - from: "Muscle.swift"
      to: "MuscleGroup.swift"
      via: "group computed property"
      pattern: "var group: MuscleGroup"
    - from: "Variant.swift"
      to: "VariantMuscle.swift"
      via: "@Relationship cascade"
      pattern: "@Relationship.*deleteRule.*cascade"
---

<objective>
Create all SwiftData models and supporting enums for the workout tracker.

Purpose: Establish the data layer foundation that all other features build upon.
Output: Complete set of compiled @Model classes and enums ready for persistence.
</objective>

<execution_context>
@/Users/opera_user/.claude/get-shit-done/workflows/execute-plan.md
@/Users/opera_user/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/01-CONTEXT.md
@.planning/phases/01-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create muscle taxonomy enums</name>
  <files>
    GymAnals/Models/Enums/MuscleGroup.swift
    GymAnals/Models/Enums/Muscle.swift
    GymAnals/Models/Enums/WeightUnit.swift
  </files>
  <action>
Create folder structure GymAnals/Models/Enums/ first.

Create MuscleGroup.swift:
- Enum with CaseIterable, Codable, Identifiable
- 6 cases: chest, back, shoulders, arms, core, legs
- displayName computed property for each
- muscles computed property returning [Muscle] filtered by group

Create Muscle.swift:
- Enum with String raw value, CaseIterable, Codable, Identifiable
- 30-40 cases covering full anatomy:
  - Chest (3): pectoralisMajorUpper, pectoralisMajorLower, pectoralisMinor
  - Back (6): latissimusDorsi, trapeziusUpper, trapeziusMiddle, trapeziusLower, rhomboids, teresMajor
  - Shoulders (4): deltoidAnterior, deltoidLateral, deltoidPosterior, rotatorCuff
  - Arms (6): bicepsBrachii, bicepsBrachialis, tricepsLongHead, tricepsLateralHead, tricepsMedialHead, forearms
  - Core (4): rectusAbdominis, obliquesInternal, obliquesExternal, erectorSpinae
  - Legs (8): quadricepsRectus, quadricepsVastus, hamstringsBicepsFemoris, hamstringsSemimembranosus, gluteusMaximus, gluteusMedius, gastrocnemius, soleus
- displayName computed property (user-friendly: "Upper Chest")
- anatomicalName computed property (formal: "Pectoralis Major - Clavicular Head")
- group computed property returning MuscleGroup

Create WeightUnit.swift:
- Enum with String raw value, CaseIterable, Codable
- 2 cases: kilograms, pounds
- abbreviation computed property: "kg", "lbs"
- conversionFactor property for kg->lbs conversion
  </action>
  <verify>
Build project with Cmd+B or `xcodebuild -scheme GymAnals -destination 'platform=iOS Simulator,name=iPhone 16'` - should compile with no errors.
  </verify>
  <done>
All three enum files exist and compile. Muscle enum has 30+ cases with proper grouping.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create SwiftData @Model classes</name>
  <files>
    GymAnals/Models/Core/Movement.swift
    GymAnals/Models/Core/Variant.swift
    GymAnals/Models/Core/VariantMuscle.swift
    GymAnals/Models/Core/Equipment.swift
    GymAnals/Models/Core/Exercise.swift
    GymAnals/Models/Core/Gym.swift
    GymAnals/Models/Core/Workout.swift
    GymAnals/Models/Core/WorkoutSet.swift
    GymAnals/Models/Core/ExerciseWeightHistory.swift
  </files>
  <action>
Create folder structure GymAnals/Models/Core/ first.

Import SwiftData in all files.

Create Movement.swift (@Model final class):
- id: UUID (default: UUID())
- name: String
- isBuiltIn: Bool (default: true)
- isHidden: Bool (default: false)
- @Relationship(deleteRule: .cascade) variants: [Variant] = []
- Initializer with name parameter

Create Variant.swift (@Model final class):
- id: UUID
- name: String
- isBuiltIn: Bool (default: true)
- movement: Movement? (inverse relationship, no macro needed on child)
- @Relationship(deleteRule: .cascade) muscleWeights: [VariantMuscle] = []
- @Relationship(deleteRule: .cascade) exercises: [Exercise] = []
- Initializer with name parameter

Create VariantMuscle.swift (@Model final class):
- id: UUID
- muscle: Muscle (stored as Codable enum)
- weight: Double (0.0-1.0 contribution ratio)
- variant: Variant? (inverse)
- Initializer with muscle, weight parameters

Create Equipment.swift (@Model final class):
- id: UUID
- name: String
- isBuiltIn: Bool (default: true)
- @Relationship(deleteRule: .cascade) exercises: [Exercise] = []
- Initializer with name parameter

Create Exercise.swift (@Model final class):
- id: UUID
- isUnilateral: Bool (default: false)
- isFavorite: Bool (default: false)
- lastUsedDate: Date? (for recents sorting)
- variant: Variant?
- equipment: Equipment?
- @Relationship(deleteRule: .cascade) workoutSets: [WorkoutSet] = []
- @Relationship(deleteRule: .cascade) weightHistory: [ExerciseWeightHistory] = []
- Computed property displayName: String combining variant and equipment names
- Initializer with variant, equipment, isUnilateral parameters

Create Gym.swift (@Model final class):
- id: UUID
- name: String
- location: String? (optional address)
- createdDate: Date (default: Date.now)
- @Relationship(deleteRule: .cascade) workouts: [Workout] = []
- @Relationship(deleteRule: .cascade) weightHistory: [ExerciseWeightHistory] = []
- Initializer with name, location parameters

Create Workout.swift (@Model final class):
- id: UUID
- startDate: Date
- endDate: Date?
- notes: String?
- isActive: Bool (default: true, for crash recovery)
- gym: Gym? (optional gym selection)
- @Relationship(deleteRule: .cascade) sets: [WorkoutSet] = []
- Computed property duration: TimeInterval? (from startDate to endDate)
- Initializer with startDate, gym parameters

Create WorkoutSet.swift (@Model final class):
- id: UUID
- reps: Int
- weight: Double
- weightUnit: WeightUnit
- setNumber: Int (order within exercise)
- completedDate: Date (default: Date.now)
- notes: String?
- workout: Workout?
- exercise: Exercise?
- Initializer with reps, weight, weightUnit, setNumber parameters

Create ExerciseWeightHistory.swift (@Model final class):
- id: UUID
- weight: Double
- weightUnit: WeightUnit
- date: Date
- exercise: Exercise?
- gym: Gym?
- Initializer with weight, weightUnit, date, exercise, gym parameters

IMPORTANT: Mark all @Model classes as `final`. Only use @Relationship on the parent side with cascade delete. Child side just has optional reference (no macro).
  </action>
  <verify>
Build project - should compile with no SwiftData errors. Check that all files are added to the Xcode project target.
  </verify>
  <done>
All 9 @Model classes compile without errors. Relationships are properly defined with cascade delete rules on parent side only.
  </done>
</task>

</tasks>

<verification>
1. Run `xcodebuild -scheme GymAnals -destination 'platform=iOS Simulator,name=iPhone 16' build` - exits with code 0
2. All model files exist in GymAnals/Models/ directory structure
3. Muscle enum has 30+ cases (count with grep)
4. All @Model classes have @Relationship decorators on parent side
</verification>

<success_criteria>
- Project compiles with all new model files
- Muscle enum contains 30-40 anatomically accurate muscle cases
- All @Model classes use proper SwiftData conventions
- Relationships form correct hierarchy: Movement -> Variant -> Exercise, Workout -> WorkoutSet
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
