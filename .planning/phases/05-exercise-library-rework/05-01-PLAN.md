---
phase: 05-exercise-library-rework
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - GymAnals/Models/Enums/MovementCategory.swift
  - GymAnals/Models/Enums/EquipmentCategory.swift
  - GymAnals/Models/Enums/Popularity.swift
  - GymAnals/Models/Embedded/Dimensions.swift
  - GymAnals/Models/Embedded/EquipmentProperties.swift
autonomous: true

must_haves:
  truths:
    - "All new enums compile with CaseIterable, Codable conformance"
    - "Dimensions struct compiles with Codable, Hashable conformance"
    - "EquipmentProperties struct compiles with Codable, Hashable conformance"
  artifacts:
    - path: "GymAnals/Models/Enums/MovementCategory.swift"
      provides: "Movement category classification"
      contains: "enum MovementCategory"
    - path: "GymAnals/Models/Embedded/Dimensions.swift"
      provides: "Exercise variation dimensions"
      contains: "struct Dimensions: Codable"
  key_links:
    - from: "Dimensions.swift"
      to: "Exercise.swift (future)"
      via: "embedded struct"
      pattern: "var dimensions: Dimensions"
---

<objective>
Create supporting enums and embedded Codable structs for the new exercise model.

Purpose: Establish type-safe building blocks for Exercise and Equipment model updates.
Output: New enum and struct files ready for use in model refactoring.
</objective>

<execution_context>
@/Users/opera_user/.claude/get-shit-done/workflows/execute-plan.md
@/Users/opera_user/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-exercise-library-rework/05-CONTEXT.md
@.planning/phases/05-exercise-library-rework/05-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create movement and equipment category enums</name>
  <files>
    GymAnals/Models/Enums/MovementCategory.swift
    GymAnals/Models/Enums/EquipmentCategory.swift
    GymAnals/Models/Enums/Popularity.swift
  </files>
  <action>
Create MovementCategory.swift:
- Enum with String raw value, CaseIterable, Codable, Identifiable
- 8 cases matching movements.json categories:
  - push, pull, squat, lunge, hinge, isolation, core
- displayName computed property for UI display
- id computed property (rawValue)

Create EquipmentCategory.swift:
- Enum with String raw value, CaseIterable, Codable, Identifiable
- 6 cases matching equipment.json categories:
  - free_weight, cable, machine, bodyweight, band, specialty
- displayName computed property for UI display:
  - free_weight -> "Free Weights"
  - cable -> "Cable/Pulley"
  - machine -> "Machines"
  - bodyweight -> "Bodyweight"
  - band -> "Resistance Bands"
  - specialty -> "Specialty Equipment"
- id computed property (rawValue)

Create Popularity.swift:
- Enum with String raw value, CaseIterable, Codable, Identifiable
- 3 cases: very_common, common, uncommon
- displayName computed property:
  - very_common -> "Very Common"
  - common -> "Common"
  - uncommon -> "Uncommon"
- sortOrder: Int computed property (1, 2, 3) for sorting by popularity
  </action>
  <verify>
Build project - all enum files should compile without errors.
  </verify>
  <done>
Three new enum files created in GymAnals/Models/Enums/ and compile successfully.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create embedded Codable structs</name>
  <files>
    GymAnals/Models/Embedded/Dimensions.swift
    GymAnals/Models/Embedded/EquipmentProperties.swift
  </files>
  <action>
Create folder GymAnals/Models/Embedded/ first.

Create Dimensions.swift:
```swift
import Foundation

/// Embedded struct for exercise variation dimensions
/// Uses empty strings instead of nil to avoid SwiftData optional decoding issues
struct Dimensions: Codable, Hashable {
    var angle: String = ""           // flat, incline_15, incline_30, incline_45, decline, etc.
    var gripWidth: String = ""       // narrow, standard, wide
    var gripOrientation: String = "" // pronated, supinated, neutral
    var stance: String = ""          // varies by movement (standing, seated, etc.)
    var laterality: String = ""      // bilateral, unilateral

    /// Check if all dimensions are empty (no variation specified)
    var isEmpty: Bool {
        angle.isEmpty && gripWidth.isEmpty && gripOrientation.isEmpty &&
        stance.isEmpty && laterality.isEmpty
    }

    /// Initialize with optional values (converts nil to empty string)
    init(
        angle: String? = nil,
        gripWidth: String? = nil,
        gripOrientation: String? = nil,
        stance: String? = nil,
        laterality: String? = nil
    ) {
        self.angle = angle ?? ""
        self.gripWidth = gripWidth ?? ""
        self.gripOrientation = gripOrientation ?? ""
        self.stance = stance ?? ""
        self.laterality = laterality ?? ""
    }
}
```

Create EquipmentProperties.swift:
```swift
import Foundation

/// Embedded struct for equipment characteristics
struct EquipmentProperties: Codable, Hashable {
    var bilateralOnly: Bool = false
    var resistanceCurve: String = "gravity" // gravity, constant, variable, ascending
    var stabilizationDemand: String = "moderate" // minimal, low, moderate, high, very_high
    var commonInGyms: Bool = true

    init(
        bilateralOnly: Bool = false,
        resistanceCurve: String = "gravity",
        stabilizationDemand: String = "moderate",
        commonInGyms: Bool = true
    ) {
        self.bilateralOnly = bilateralOnly
        self.resistanceCurve = resistanceCurve
        self.stabilizationDemand = stabilizationDemand
        self.commonInGyms = commonInGyms
    }
}
```

Ensure both files are added to the Xcode target.
  </action>
  <verify>
Build project - both struct files should compile. Verify Codable conformance by checking no compiler errors for encoding/decoding.
  </verify>
  <done>
Two embedded struct files created in GymAnals/Models/Embedded/ with Codable, Hashable conformance.
  </done>
</task>

</tasks>

<verification>
1. Run `xcodebuild -scheme GymAnals -destination 'platform=iOS Simulator,name=iPhone 16' build` - exits with code 0
2. All 5 new files exist in correct directories
3. MovementCategory has 7+ cases
4. EquipmentCategory has 6 cases
5. Popularity has 3 cases
6. Dimensions struct has 5 String properties
7. EquipmentProperties struct has 4 properties
</verification>

<success_criteria>
- Project compiles with all new files
- Enums have correct raw value types (String)
- Embedded structs conform to Codable and Hashable
- No optional properties in embedded structs (uses empty string defaults)
</success_criteria>

<output>
After completion, create `.planning/phases/05-exercise-library-rework/05-01-SUMMARY.md`
</output>
